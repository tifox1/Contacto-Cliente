(this.webpackJsonpmyfirstapp=this.webpackJsonpmyfirstapp||[]).push([[0],{194:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),i=n.n(o),c=(n(194),n(11)),s=n(48),l=n(335),j=n(367),u=n(348),d=n(371),h=n(370),b=n(17),m=n(71),O=n(28),p=n(339),x=n(366),g=n(338),C=n(172),f=n(80),v=n(2),S=function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(l.a,{item:!0,xs:12,component:j.a,padding:1,children:Object(v.jsx)(g.a,{in:!0,children:Object(v.jsx)(C.a,{variant:"outlined",children:Object(v.jsxs)(l.a,{container:!0,spacing:1,component:j.a,padding:2,children:[Object(v.jsx)(l.a,{container:!0,xs:12,direction:"row",alignItems:"center",children:function(){if(e.title)return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(f.a,{variant:"h6",children:e.title})})}()}),Object(v.jsx)(l.a,{item:!0,xs:12,children:e.children})]})})})})})},y=function(e){return Object(v.jsx)(S,{title:e.title,children:Object(v.jsx)(p.a,{fullWidth:!0,children:Object(v.jsx)(x.a,{label:"Respuesta",variant:"outlined",multiline:!0,name:e.name,value:e.value,onChange:e.onChange})})})},P=n(372),F=n(344),E=n(368),_=n(343),T=n(346),V=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){"other"===e.value?o(!0):o(!1)}),[e.value]),Object(v.jsx)(S,{title:e.title,children:Object(v.jsxs)(l.a,{container:!0,children:[Object(v.jsx)(l.a,{item:!0,xs:12,children:Object(v.jsxs)(p.a,{children:[Object(v.jsxs)(P.a,{value:e.value,onChange:e.onChange,name:e.name,error:e.error,children:[e.options.map((function(t){return Object(v.jsx)(F.a,{value:t[0],control:Object(v.jsx)(E.a,{}),label:t[1]},e.options.indexOf(t))})),e.renderOther&&Object(v.jsx)(F.a,{value:"other",control:Object(v.jsx)(E.a,{}),label:"Otro..."})]}),Object(v.jsx)(T.a,{in:e.errorText,children:Object(v.jsx)(_.a,{error:!0,children:e.errorText})})]})}),Object(v.jsx)(l.a,{item:!0,xs:12,children:Object(v.jsxs)(T.a,{in:r,children:[Object(v.jsx)(p.a,{fullWidth:!0,children:Object(v.jsx)(x.a,{label:"Especificar",variant:"outlined",name:e.otherName,value:e.otherValue,onChange:e.onChange,error:e.otherError})}),Object(v.jsx)(T.a,{in:e.otherError,children:Object(v.jsx)(_.a,{error:!0,children:e.otherError})})]})})]})})},k=n(369),q=function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(S,{title:e.title,children:[Object(v.jsx)(p.a,{variant:"outlined",fullWidth:!0,children:Object(v.jsx)(k.a,Object(s.a)(Object(s.a)({},e),{},{getOptionLabel:function(e){return e[0]},renderInput:function(t){return Object(v.jsx)(x.a,Object(s.a)(Object(s.a)({},t),{},{label:e.title,variant:"outlined"}))}}))}),Object(v.jsx)(T.a,{in:e.error,children:Object(v.jsx)(_.a,{error:!0,children:e.error})})]})})},N=n(41);function w(e){return Object(v.jsx)(h.a,Object(s.a)({elevation:6,variant:"filled"},e))}var D=function(e){var t=new N.a,n=Object(a.useState)(!1),r=Object(c.a)(n,2),o=r[0],i=r[1],s=function(e,t){"clickaway"!==t&&i(!1)},h=Object(a.useState)(!1),p=Object(c.a)(h,2),x=p[0],g=p[1],C=Object(m.a)({initialValues:{clientes:"",tipoContacto:"",tipoCliente:"",motDejoComprar:"",cerrasteVenta:"",comproProducto:"",quienCompra:"",detProducto:"",muestra:"",comentarios:"",otherComproProducto:"",otherQuienCompra:""},onSubmit:function(e,n){var a=n.resetForm;fetch("/api/formulario/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({salesman_name:t.get("usuario").usuario,company:t.get("usuario").company,contact:e.tipoContacto,client_type:e.tipoCliente,stop_selling:e.motDejoComprar,order:e.cerrasteVenta,seller_name:e.quienCompra,product_details:e.detProducto,sample:e.muestra,comment:e.comentarios,id_cliente:e.clientes,closed_sells:e.cerrasteVenta,competition:e.comproProducto,other_seller:e.otherQuienCompra,other_competition:e.otherComproProducto})}).then((function(e){e.ok&&(console.log("enviado"),a(),g(!1),i(!0))}))},validationSchema:O.a({clientes:O.b().required("Ingrese el cliente"),tipoContacto:O.b().required("Ingrese medio de contacto"),tipoCliente:O.b().required("Ingrese tipo de cliente"),cerrasteVenta:O.b().required("Ingrese si cerr\xf3 una venta"),otherComproProducto:O.b().when("comproProducto",{is:"other",then:O.b().required("Especifique otro producto")}),otherQuienCompra:O.b().when("quienCompra",{is:"other",then:O.b().required("Especifique otro proveedor")})})});return Object(a.useEffect)((function(){C.isSubmitting&&Object.keys(C.errors).length>0&&document.getElementsByName(Object.keys(C.errors)[0])[0].focus()}),[C]),Object(v.jsxs)("form",{onSubmit:C.handleSubmit,children:[o?Object(v.jsx)(b.a,{to:"/"}):null,Object(v.jsxs)(l.a,{container:!0,component:j.a,padding:1,children:[Object(v.jsx)(q,{error:x&&C.errors.clientes,name:"clientes",options:e.clientes,title:"Cliente",inputValue:C.values.clientes,disableClearable:!0,onInputChange:function(e,t){C.setFieldValue("clientes",t)},onChange:function(e,t){C.setFieldValue("clientes",t)}}),Object(v.jsx)(V,{title:"\xbfPor qu\xe9 medio contactaste?",options:[["Visita al Cliente","Visita al Cliente"],["Whatsapp","Whatsapp"],["Llamada","Llamada"],["Correo Electronico","Correo Electronico"],["Visito Segupak","Visito Segupak"]],name:"tipoContacto",value:C.values.tipoContacto,onChange:C.handleChange,error:x&&C.errors.tipoContacto,errorText:x&&C.errors.tipoContacto}),Object(v.jsx)(V,{title:"Tipo de cliente",options:[["Habitual","Habitual"],["Dejo de Comprar","Dejo de Comprar"],["En gestion de compra","En gestion de compra"],["Casual","Casual"]],name:"tipoCliente",value:C.values.tipoCliente,onChange:C.handleChange,error:x&&C.errors.tipoCliente,errorText:x&&C.errors.tipoCliente}),Object(v.jsx)(V,{title:"\xbfPorqu\xe9 dej\xf3 de comprar?",options:[["Precio","Precio"],["Producto Faltante","Producto Faltante"]],name:"motDejoComprar",value:C.values.motDejoComprar,onChange:C.handleChange}),Object(v.jsx)(V,{title:"\xbfCerraste una venta?",options:[["Si","Si"],["No","No"],["Cotizacion","Cotizacion"]],name:"cerrasteVenta",value:C.values.cerrasteVenta,onChange:C.handleChange,error:x&&C.errors.cerrasteVenta,errorText:x&&C.errors.cerrasteVenta}),Object(v.jsx)(V,{title:"\xbfCompr\xf3 alg\xfan producto de la competencia?",options:[["Cintas","Cintas"],["FILM","FILM"],["FLEJES","FLEJES"],["POF","POF"]],renderOther:!0,otherName:"otherComproProducto",otherValue:C.values.otherComproProducto,otherError:x&&C.errors.otherComproProducto,name:"comproProducto",value:C.values.comproProducto,onChange:C.handleChange}),Object(v.jsx)(V,{title:"\xbfDe qui\xe9n compra?",options:[["Cintas S.A.","Cintas S.A."],["FONDO ESTRELLA S.A.","FONDO ESTRELLA S.A."],["PARPACK S.A","PARPACK S.A."]],renderOther:!0,otherName:"otherQuienCompra",otherValue:C.values.otherQuienCompra,otherError:x&&C.errors.otherQuienCompra,name:"quienCompra",value:C.values.quienCompra,onChange:C.handleChange}),Object(v.jsx)(y,{title:"Detalle del producto de la competencia",name:"detProducto",value:C.values.detProducto,onChange:C.handleChange}),Object(v.jsx)(V,{title:"\xbfConseguiste una muestra?",options:[["Si","Si"],["No","No"]],name:"muestra",value:C.values.muestra,onChange:C.handleChange}),Object(v.jsx)(y,{title:"Comentarios",name:"comentarios",value:C.values.comentarios,onChange:C.handleChange}),Object(v.jsx)(l.a,{component:j.a,padding:1,children:Object(v.jsx)(u.a,{type:"submit",color:"primary",variant:"contained",onClick:function(){return g(!0)},children:"Enviar"})})]}),Object(v.jsx)(d.a,{open:o,autoHideDuration:6e3,onClose:s,children:Object(v.jsx)(w,{onClose:s,severity:"success",children:"Tu formulario ha sido enviado!"})})]})},I=n(60),A=n(345),L=n(349),H=n(350),J=n(351),W=n(163),R=n.n(W),B=n(162),Q=n.n(B),G=Object(L.a)((function(e){return{root:{flexGrow:1,background:"#000"},title:{flexGrow:1}}})),M=function(e){var t=G(),n=Object(b.g)(),a=new N.a;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(j.a,{marginBottom:7,children:Object(v.jsx)(H.a,{className:t.root,position:"fixed",children:Object(v.jsxs)(J.a,{children:[function(){if(e.back)return Object(v.jsx)(A.a,{component:I.b,to:e.back,children:Object(v.jsx)(Q.a,{})})}(),Object(v.jsx)(f.a,{className:t.title,variant:"h6",children:e.title}),e.children,Object(v.jsx)(u.a,{onClick:function(){a.remove("usuario"),n.push("/login")},endIcon:Object(v.jsx)(R.a,{}),children:a.get("usuario")?a.get("usuario").usuario:""})]})})})})},z=n(100),U=n.n(z),K=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],r=t[1],o=Object(b.g)();return Object(a.useEffect)((function(){var e=new N.a;e.get("usuario")?o.push("/"):o.push("/login"),fetch("/api/session/",{method:"POST",body:JSON.stringify(e.get("usuario")),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){r(e.clientes)}))}),[o]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M,{title:"Formulario",children:Object(v.jsx)(A.a,{component:I.b,to:"/test",children:Object(v.jsx)(U.a,{})})}),Object(v.jsx)(j.a,{marginBottom:3,children:Object(v.jsx)(D,{clientes:n})})]})},X=n(352),Y=n(353),Z=Object(L.a)((function(e){return{root:{flexGrow:1,background:"#000"},title:{flexGrow:1},divs:{margin:"auto"}}})),$=function(){var e=Z(),t=new N.a,n=Object(b.g)(),r=Object(a.useState)(!1),o=Object(c.a)(r,2),i=o[0],s=o[1],g=Object(a.useState)(!1),C=Object(c.a)(g,2),y=C[0],P=C[1],F=Object(a.useState)(""),E=Object(c.a)(F,2),V=E[0],k=E[1],q=Object(a.useState)("error"),w=Object(c.a)(q,1)[0],D=Object(a.useState)(!1),I=Object(c.a)(D,2),A=I[0],L=I[1],W=Object(m.a)({initialValues:{usuario:"",contrasenia:""},onSubmit:function(e){L(!0),fetch("/api/usuariovalidacion/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:e.usuario,contrasenia:e.contrasenia})}).then((function(e){return L(!1),e.ok?e.json():405===e.status?(k("Contrase\xf1a o usuario incorrectos"),P(!0),!1):(k("No se ha podido conectar con el servidor"),!1)})).then((function(e){e&&(t.set("usuario",e,{path:"/"}),n.push("/"))})).catch((function(e){"TypeError"===e.name&&(L(!1),k("No se pudo contactar con el servidor para validar el inicio de sesi\xf3n"),P(!0))}))},validationSchema:O.a({usuario:O.b().required("Ingrese usuario"),contrasenia:O.b().required("Ingrese contrase\xf1a")})});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(H.a,{className:e.root,position:"static",children:Object(v.jsx)(J.a,{children:Object(v.jsx)(f.a,{className:e.title,variant:"h6",noWrap:!0,children:"Contacto Clientes"})})}),Object(v.jsx)(X.a,{open:A,style:{zIndex:200},transitionDuration:{enter:1500},children:Object(v.jsx)(Y.a,{color:"primary"})}),Object(v.jsx)(d.a,{open:y,autoHideDuration:5e3,onClose:function(e,t){"clickaway"!==t&&P(!1)},children:Object(v.jsx)(h.a,{elevation:6,variant:"filled",severity:w,children:V})}),Object(v.jsx)("form",{onSubmit:W.handleSubmit,children:Object(v.jsx)(l.a,{container:!0,component:j.a,padding:1,children:Object(v.jsx)(S,{title:"Iniciar sesi\xf3n",children:Object(v.jsxs)(l.a,{container:!0,component:p.a,spacing:2,children:[Object(v.jsxs)(l.a,{item:!0,xs:12,md:6,children:[Object(v.jsx)(x.a,{name:"usuario",variant:"outlined",label:"Usuario",error:i&&W.errors.usuario,fullWidth:!0,onChange:W.handleChange}),Object(v.jsx)(T.a,{in:i&&W.errors.usuario,children:Object(v.jsx)(_.a,{error:!0,children:W.errors.usuario})})]}),Object(v.jsxs)(l.a,{item:!0,xs:12,md:6,children:[Object(v.jsx)(x.a,{name:"contrasenia",variant:"outlined",label:"Contrase\xf1a",type:"password",error:i&&W.errors.contrasenia,fullWidth:!0,onChange:W.handleChange}),Object(v.jsx)(T.a,{in:i&&W.errors.contrasenia,children:Object(v.jsx)(_.a,{error:!0,children:W.errors.contrasenia})})]}),Object(v.jsx)(l.a,{item:!0,alignItems:"center",justify:"center",xs:12,children:Object(v.jsx)(u.a,{variant:"contained",type:"submit",color:"primary",className:e.margin,onClick:function(){s(!0)},children:"Acceder"})})]})})})})]})},ee=n(364),te=n(169),ne=n(363),ae=n(102),re=n(362),oe=n(167),ie=n.n(oe),ce=n(168),se=n(25),le=n(365),je=function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(se.a,{utils:ce.a,children:Object(v.jsx)(le.a,Object(s.a)({inputVariant:"outlined",label:e.title,format:"dd/MM/yyyy"},e))})})},ue=n(354),de=n(355),he=n(356),be=n(357),me=n(358),Oe=function(e){return Object(v.jsx)(ue.a,{children:Object(v.jsxs)(de.a,{children:[Object(v.jsx)(he.a,{children:Object(v.jsx)(be.a,{colSpan:e.items.length,children:Object(v.jsx)(l.a,{container:!0,direction:"row",alignItems:"center",children:e.titulo})})}),Object(v.jsx)(he.a,{children:e.items.map((function(e){return Object(v.jsx)(be.a,{align:e[1],children:e[0]})}))}),Object(v.jsx)(me.a,{children:e.children})]})})},pe=n(359),xe=n(342),ge=n(347),Ce=n(360),fe=n(361),ve=n(165),Se=n.n(ve),ye=n(166),Pe=n.n(ye),Fe=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1],i=[["contact","\xbfPor qu\xe9 medio contactaste?"],["client_type","Tipo de cliente"],["stop_selling","\xbfPorqu\xe9 dej\xf3 de comprar?"],["closed_sells","\xbfCerraste una venta?"],["competition","Compr\xf3 alg\xfan producto de la competencia?"],["seller_name","\xbfDe qui\xe9n compra?"],["product_details","Detalle del producto de la competencia"],["sample","\xbfConseguiste una muestra?"],["comment","Comentarios"]];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(pe.a,{children:[Object(v.jsx)(be.a,{children:Object(v.jsx)(A.a,{onClick:function(){return o(!r)},children:r?Object(v.jsx)(Se.a,{}):Object(v.jsx)(Pe.a,{})})}),Object(v.jsx)(be.a,{children:e.item.cliente}),Object(v.jsx)(be.a,{align:"right",children:e.item.fecha})]}),Object(v.jsx)(pe.a,{children:Object(v.jsx)(be.a,{style:{paddingBottom:0,paddingTop:0},colSpan:4,children:Object(v.jsx)(T.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(v.jsx)(xe.a,{"aria-labelledby":"subheader",subheader:Object(v.jsx)(ge.a,{id:"subheader",children:"Respuestas"}),children:e.item.respuestas.map((function(e){return i.map((function(t){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ce.a,{children:Object(v.jsx)(fe.a,{primary:t[1],secondary:e[t[0]]})},i.indexOf(t))})}))}))})})})})]})},Ee=function(){var e=new N.a,t=Object(a.useState)([]),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(m.a)({initialValues:{desde:new Date,hasta:new Date},onSubmit:function(t){t.desde.setHours(0,0),t.hasta.setHours(23,59),fetch("api/historial/",{method:"POST",body:JSON.stringify({usuario:e.get("usuario").usuario,fecha_min:t.desde.toUTCString(),fecha_max:t.hasta.toUTCString()}),headers:{"Content-Type":"application/json"}}).then((function(e){if(e.ok)return e.json()})).then((function(e){var t=[];console.log(e.resultado),e.resultado.forEach((function(e){t.push({fecha:e.fecha,cliente:e.id_cliente,respuestas:[{company:e.company,salesman_name:e.salesman_name,contact:e.contact,client_type:e.client_type,closed_sells:e.closed_sells,stop_selling:e.stop_selling,order:e.order,competition:e.competition,seller_name:e.seller_name,product_details:e.product_details,sample:e.sample,comment:e.comment}]})})),o(t)}))}});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(M,{back:"/",title:"Gestiones realizadas"}),Object(v.jsx)(l.a,{container:!0,component:j.a,padding:1,children:Object(v.jsx)(S,{title:"Rango",icon:ie.a,children:Object(v.jsxs)(l.a,{container:!0,spacing:2,children:[Object(v.jsx)(l.a,{item:!0,xs:12,children:Object(v.jsx)("form",{onSubmit:i.handleSubmit,children:Object(v.jsxs)(l.a,{container:!0,spacing:2,children:[Object(v.jsx)(l.a,{item:!0,children:Object(v.jsx)(je,{title:"Desde",value:i.values.desde,disableFuture:!0,onChange:function(e){i.setFieldValue("desde",e)}})}),Object(v.jsx)(l.a,{item:!0,children:Object(v.jsx)(je,{title:"Hasta",value:i.values.hasta,disableFuture:!0,onChange:function(e){return i.setFieldValue("hasta",e)}})}),Object(v.jsx)(l.a,{item:!0,xs:12,children:Object(v.jsx)(u.a,{color:"primary",variant:"contained",type:"submite",children:"aceptar"})})]})})}),Object(v.jsxs)(l.a,{item:!0,xs:12,children:[Object(v.jsx)(re.a,{}),Object(v.jsx)(Oe,{titulo:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(U.a,{})," \xa0",Object(v.jsx)("h2",{children:"Historia"})]}),items:[["Desplegar","left"],["cliente","left"],["fecha","right"]],children:r.map((function(e){return Object(v.jsx)(Fe,{item:e})}))})]})]})})})]})},_e=Object(te.a)({palette:{type:"dark",secondary:ae.a}});var Te=function(){return Object(v.jsxs)(ne.a,{theme:_e,children:[Object(v.jsx)(ee.a,{}),Object(v.jsx)(I.a,{children:Object(v.jsxs)(b.d,{children:[Object(v.jsx)(b.b,{path:"/login",children:Object(v.jsx)($,{})}),Object(v.jsx)(b.b,{path:"/test",children:Object(v.jsx)(Ee,{})}),Object(v.jsx)(b.b,{path:"/",children:Object(v.jsx)(K,{})})]})})]})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,375)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))};i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(Te,{})}),document.getElementById("root")),Ve()}},[[300,1,2]]]);
//# sourceMappingURL=main.25385125.chunk.js.map